(function(a,d){"function"===typeof define&&define.amd?define(["jquery","mooUser"],d):"object"===typeof exports?module.exports=d(require("jquery")):a.mooLike=d()})(this,function(a,d){var k=function(b,c,e){a.post(mooConfig.url.base+"/likes/ajax_add/"+b+"/"+c+"/"+e,{noCache:1},function(b){try{var c=a.parseJSON(b);a("#like_count").html(parseInt(c.like_count));a("#dislike_count").html(parseInt(c.dislike_count));a("#like_count2").html(parseInt(c.like_count));a("#dislike_count2").html(parseInt(c.dislike_count));
e?(a("#like_count").parent().prev().toggleClass("active"),a("#dislike_count").parent().prev().removeClass("active")):(a("#dislike_count").parent().prev().toggleClass("active"),a("#like_count").parent().prev().removeClass("active"))}catch(h){d.validateUser()}})},h=function(b,c){a.post(mooConfig.url.base+"/likes/ajax_add/Photo_Photo/"+b+"/"+c,{noCache:1},function(b){try{var g=a.parseJSON(b);a("#photo_like_count2").html(parseInt(g.like_count));a("#photo_dislike_count2").html(parseInt(g.dislike_count));
c?(a("#photo_like_count").toggleClass("active"),a("#photo_dislike_count").removeClass("active")):(a("#photo_dislike_count").toggleClass("active"),a("#photo_like_count").removeClass("active"))}catch(f){d.validateUser()}})},l=function(b,c,e){a.post(mooConfig.url.base+"/likes/ajax_add/"+("photo_comment"==b?"comment":b)+"/"+c+"/"+e,{noCache:1},function(g){try{var f=a.parseJSON(g);a("#"+b+"_like_"+c).html(parseInt(f.like_count));a("#"+b+"_dislike_"+c).html(parseInt(f.dislike_count));"comment"==b&&(a("#photo_comment_like_"+
c).html(parseInt(f.like_count)),a("#photo_comment_dislike_"+c).html(parseInt(f.dislike_count)));e?(a("#"+b+"_l_"+c).toggleClass("active"),a("#"+b+"_d_"+c).removeClass("active"),"comment"==b&&(a("#photo_comment_l_"+c).toggleClass("active"),a("#photo_comment_d_"+c).removeClass("active"))):(a("#"+b+"_d_"+c).toggleClass("active"),a("#"+b+"_l_"+c).removeClass("active"),"comment"==b&&(a("#photo_comment_d_"+c).toggleClass("active"),a("#photo_comment_l_"+c).removeClass("active")))}catch(h){d.validateUser()}})};
return{initLikeActivity:function(){a(".likeActivity").unbind("click");a(".likeActivity").click(function(){var b=a(this).data();l(b.type,b.id,b.status)})},likePhoto:h,initLikeItem:function(){a(".likeItem").unbind("click");a(".likeItem").click(function(){var b=a(this).data();k(b.type,b.id,b.status)})},initLikePhoto:function(){a(".likePhoto").unbind("click");a(".likePhoto").on("click",function(){var b=a(this).data();h(b.id,b.thumbUp)})}}});
