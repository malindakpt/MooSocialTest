(function(a,d){"function"===typeof define&&define.amd?define(["jquery","mooFileUploader","mooGlobal"],d):"object"===typeof exports?module.exports=d(require("jquery")):a.mooAttach=d()})(this,function(a,d,g){return{registerAttachComment:function(c,b){b="undefined"==typeof b?"":"#"+b+" ";new d.fineUploader({element:a(b+"#comment_button_attach_"+c)[0],text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i></div>'},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},
multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:g.errorHandler,onSubmit:function(h,d){var e=a('<span id="attach_'+c+"_"+h+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');a(b+"#comment_preview_image_"+c).append(e);a(b+"#comment_button_attach_"+c).hide()},onComplete:function(h,d,e,g){a(this.getItemByFileId(h)).remove();img=a('<img src="'+mooConfig.url.base+"/"+e.photo+'">');img.load(function(){var f=
a("#attach_"+c+"_"+h);f.attr("style","background-image:url("+mooConfig.url.base+"/"+e.photo+")");var d=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');f.append(d);f.find(".thumb-review-delete").unbind("click");f.find(".thumb-review-delete").click(function(){f.remove();a(b+"#comment_button_attach_"+c).show();a(b+"#comment_image_"+c).val("")})});a(b+"#comment_image_"+c).val(e.photo)}}})},registerAttachCommentEdit:function(c,b){new d.fineUploader({element:a("#"+
c+"_comment_attach_"+b)[0],text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i></div>'},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:g.errorHandler,onSubmit:function(d,g){var e=a('<span id="attach__'+b+"_"+d+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');
a("#"+c+"_comment_preview_attach_"+b).append(e);a("#"+c+"_comment_attach_"+b).hide()},onComplete:function(d,g,e,k){a(this.getItemByFileId(d)).remove();img=a('<img src="'+mooConfig.url.base+"/"+e.photo+'">');img.load(function(){var f=a("#attach__"+b+"_"+d);f.attr("style","background-image:url("+mooConfig.url.base+"/"+e.photo+")");var g=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');f.append(g);f.find(".thumb-review-delete").unbind("click");f.find(".thumb-review-delete").click(function(){f.remove();
a("#"+c+"_comment_attach_"+b).show();a("#"+c+"_comment_attach_id_"+b).val("")})});a("#"+c+"_comment_attach_id_"+b).val(e.photo);a("#"+c+"_comment_attach_"+b).hide()}}})}}});