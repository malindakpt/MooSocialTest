(function(a,c){"function"===typeof define&&define.amd?define("jquery mooFileUploader mooAlert mooBehavior mooAjax mooButton mooPhrase mooGlobal picker_date picker_time spinner tokeninput".split(" "),c):"object"===typeof exports?module.exports=c(require("jquery")):a.mooEvent=c()})(this,function(a,c,d,g,k,h,b,l){var m=function(){a("#friends").tokenInput(mooConfig.url.base+"/friends/do_get_json",{preventDuplicates:!0,hintText:b.__("enter_a_friend_s_name"),noResultsText:b.__("no_results"),tokenLimit:20,
resultsFormatter:function(a){return"<li>"+a.avatar+a.name+"</li>"}});a("#sendButton").unbind("click");a("#sendButton").click(function(){a("#sendButton").spin("small");h.disableButton("sendButton");a(".error-message").hide();k.post({url:mooConfig.url.base+"/events/sendInvite",data:a("#sendInvite").serialize()},function(b){h.enableButton("sendButton");a("#sendButton").spin(!1);b=a.parseJSON(b);1==b.result?a("#simple-modal-body").html(b.msg):(a(".error-message").show(),a(".error-message").html(b.message))});
return!1})},f=function(){a(".deleteEvent").unbind("click");a(".deleteEvent").click(function(){var e=a(this).data(),e=mooConfig.url.base+"/events/do_delete/"+e.id;d.confirm(b.__("are_you_sure_you_want_to_remove_this_event"),e)})},n=function(){a(".inviteMore").unbind("click");a(".inviteMore").click(function(){var b=a(this).data();a("#langModal .modal-content").html("");a("#langModal .modal-content").spin("small");a("#langModal .modal-content").load(b.url,function(){a("#langModal .modal-content").spin(!1);
a("#langModal").modal("show")})})};return{initOnCreate:function(){new c.fineUploader({element:a("#select-0")[0],multiple:!1,text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i>'+b.__("drag_or_click_here_to_upload_photo")+"</div>"},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},request:{endpoint:mooConfig.url.base+"/event/event_upload/avatar"},callbacks:{onError:l.errorHandler,onComplete:function(b,c,d){a("#photo").val(d.filename);
a("#item-avatar").attr("src",d.thumb);a("#item-avatar").show();a("#photo").val(d.file_path)}}});a(".datepicker").pickadate({monthsFull:[b.__("january"),b.__("february"),b.__("march"),b.__("april"),b.__("may"),b.__("june"),b.__("july"),b.__("august"),b.__("september"),b.__("october"),b.__("november"),b.__("december")],monthsShort:[b.__("jan"),b.__("feb"),b.__("mar"),b.__("apr"),b.__("may"),b.__("jun"),b.__("jul"),b.__("aug"),b.__("sep"),b.__("oct"),b.__("nov"),b.__("dec")],weekdaysFull:[b.__("sunday"),
b.__("monday"),b.__("tuesday"),b.__("wednesday"),b.__("thursday"),b.__("friday"),b.__("saturday")],weekdaysShort:[b.__("sun"),b.__("mon"),b.__("tue"),b.__("wed"),b.__("thu"),b.__("fri"),b.__("sat")],today:b.__("today"),clear:b.__("clear"),close:b.__("close"),format:"yyyy-mm-dd",close:!1,onClose:function(){""!=a("#to").val()&&a("#from").val()>a("#to").val()&&(d.alert(b.__("to_date_must_be_greater_than_from_date")),a("#to").val(""));if(""!=a("#to").val()&&a("#from").val()>=a("#to").val()){var e=parseInt(a("#from_time_root .picker__list-item--selected").attr("data-pick")),
c=parseInt(a("#to_time_root .picker__list-item--selected").attr("data-pick"));""!=a("#to_time").val()&&c<=e&&(d.alert(b.__("to_time_must_be_greater_than_from_time")),a("#to").val(""),a("#to_time").val(""))}}});a(".timepicker").pickatime({clear:b.__("clear"),format:"24"==mooConfig.time_format?"H:i":"h:i A",onClose:function(c){if(""!=a("#to").val()&&a("#from").val()>=a("#to").val()){c=parseInt(a("#from_time_root .picker__list-item--selected").attr("data-pick"));var f=parseInt(a("#to_time_root .picker__list-item--selected").attr("data-pick"));
""!=a("#to_time").val()&&f<=c&&(d.alert(b.__("to_time_must_be_greater_than_from_time")),a("#to").val(""),a("#to_time").val(""))}}});a("#saveBtn").unbind("click");a("#saveBtn").click(function(){a(this).addClass("disabled");null!==tinyMCE.activeEditor&&a("#editor").val(tinyMCE.activeEditor.getContent());g.createItem("events",!0)});f()},initOnView:function(){f();n()},initOnListing:function(){g.initMoreResults();f()},initOnInvitePopup:function(){m()}}});